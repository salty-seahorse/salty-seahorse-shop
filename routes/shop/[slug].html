<:Head>
    <!-- COMMON TAGS -->
    <meta charset='utf-8'>
    <title>{{ item.metadata.title }}</title>
    <!-- Search Engine -->
    <meta name='description' content={{ item.metadata.scent }}>
    <meta name='image' content='{{ ENV.baseUrl }}{{ item.metadata.image }}'>
    <!-- Schema.org for Google -->
    <meta itemprop='name' content={{ item.metadata.title }}>
    <meta itemprop='description' content={{ item.metadata.scent }}>
    <meta itemprop='image' content='{{ ENV.baseUrl }}{{ item.metadata.image }}'>
    <!-- Twitter -->
    <meta name='twitter:card' content='summary'>
    <meta name='twitter:title' content={{ item.metadata.title }}>
    <meta name='twitter:description' content={{ item.metadata.scent }}>
    <meta name='twitter:site' content='@{{ config.twitterId }}'>
    <meta name='twitter:creator' content='@{{ config.twitterId }}'>
    <meta name='twitter:image:src' content='{{ ENV.baseUrl }}{{ item.metadata.image }}'>
    <!-- Twitter - Product (e-commerce) -->
    <!-- Open Graph general (Facebook, Pinterest & Google+) -->
    <meta name='og:title' content={{ item.metadata.title }}>
    <meta name='og:description' content={{ item.metadata.scent }}>
    <meta name='og:image' content='{{ ENV.baseUrl }}{{ item.metadata.image }}'>
    <meta name='og:url' content='{{ ENV.baseUrl }}shop/{{ item.slug }}'>
    <meta name='og:site_name' content={{ item.metadata.title }}>
    <meta name='fb:admins' content={{ config.facebookId }}>
    <meta name='og:type' content='product'>
    <!-- Open Graph - Product (e-commerce) -->
    <meta name='product:availability' content='preorder'>
    <meta name='product:price:currency' content='USD'>
    <meta name='product:price:amount' content={{ item.metadata.price }}>
    <meta name='product:brand' content='Salty Seahorse Shop'>
</:Head>

<Layout>
    <div slot='navigation'>
        <Nav page='shop' />
    </div>

    <div slot='content' class='mh3 pv4'>
        <ol class='ma0 mb4 pa0 list cf' vocab='http://schema.org/' typeof='BreadcrumbList' >
            <li class='fl' property='itemListElement' typeof='ListItem'>
                <a class='no-underline' href='/shop' proprety='item' typeof='WebPage'>
                    <span property='name'>Shop</span>
                    <span class='mh2 pr1'>></span>
                </a>
                <meta property='position' content='1'>
            </li>
            <li class='fl' property='itemListElement' typeof='ListItem'>
                <a class='no-underline' href={{`/shop/${ item.slug }`}} proprety='item' typeof='WebPage'>
                    <span property='name'>{{ item.metadata.title }}</span>
                </a>
                <meta property='position' content='2'>
            </li>
        </ol>

        <div class='cf' vocab='http://schema.org/' typeof='Product'>
            <span property='brand' typeof='Organization'>
                <meta property='name' content='Salty Seahorse Shop' />
            </span>

            <div class='fl dn db-ns w-third pr2'>
                <img class='db center mw6 w-100' src='/{{ item.metadata.image }}' alt={{ item.metadata.title }} property='image' />
            </div>

            <div class='fl w-100 w-two-thirds-ns pl4-ns pl6-l'>
                <div class='f1 tc tl-ns' property='name'>{{ item.metadata.title }}</div>

                <img class='mt4 mw5 db center dn-ns' src='/{{ item.metadata.image }}' alt={{ item.metadata.title }} />

                <div class='f3 f2-ns mt3 gray' property='offers' typeof='Offer'>
                    <meta property='priceCurrency' content='USD' />
                    <span property='seller' typeof='Organization'>
                        <meta property='name' content='Salty Seahorse Shop' />
                    </span>
                    <link property='itemCondition' href='http://schema.org/NewCondition' />
                    <link property='availability' href='http://schema.org/InStock' />
                    $<span property='price'>{{ item.metadata.price }}</span>
                </div>

                <div class='f4 f3-ns b mt2 mt3-ns' property='description'>{{ item.metadata.scent }}</div>

                <div class='f5 f4-ns fw1 mt4 lh-copy'>
                    {{{ item.html }}}
                </div>

                <div class='f4 f3-ns mt4'>$5 flat shipping on all orders!</div>
                <div class='f5 f4-ns mt2'>*Please allow 3-5 business days for processing</div>

                <button class='snipcart-add-item db center dib-ns open-sans f5 f4-ns dark-gray bg-transparent hover-bg-salty-teal hover-b--salty-teal hover-white ba bw1 b--dark-gray bg-animate br2 ma0 mt4 ph4 pv2'
                    data-item-name={{ item.metadata.title }} data-item-price={{ item.metadata.price }} data-item-image='{{ ENV.baseUrl }}{{ item.metadata.image }}' data-item-id={{
                    item.slug }} data-item-url={{ `/shop/${item.slug}` }}>ADD TO CART</button>
            </div>
        </div>
    </div>
</Layout>

<script>
    import config from '../_config';
    import Layout from '../_components/Layout.html';
    import Nav from '../_components/Nav.html';

    export default {
        components: {
            Layout,
            Nav
        },

        preload({ params, query }) {
            const { slug } = params;

            return this.fetch(`/shop/${slug}.json`).then(r => r.json()).then(item => {
                return { item };
            });
        },

        helpers: {
            config,
            ENV
        }
    }
</script>